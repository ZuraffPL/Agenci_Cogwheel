<form class="{{cssClass}}" autocomplete="off">
  <header class="sheet-header">
    <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{localize 'COGSYNDICATE.EditImage'}}" />
    <h1><input name="name" type="text" value="{{actor.name}}" placeholder="{{localize 'COGSYNDICATE.CharacterName'}}" class="centered" /></h1>
  </header>

  <section class="sheet-body">
    <!-- Nawigacja tabów -->
    <nav class="sheet-tabs tabs" data-group="primary">
      <a class="item active" data-tab="core">{{localize "COGSYNDICATE.CoreTab"}}</a>
      <a class="item" data-tab="feats">{{localize "COGSYNDICATE.FeatsTab"}}</a>
      <a class="item" data-tab="equipment">{{localize "COGSYNDICATE.EquipmentTab"}}</a>
      <a class="item" data-tab="traumas">{{localize "COGSYNDICATE.TraumasTab"}}</a>
      <a class="item" data-tab="notes">{{localize "COGSYNDICATE.NotesTab"}}</a>
    </nav>

    <!-- Zawartość tabów -->
    <section class="sheet-content">
      <!-- Zakładka Core (domyślna) -->
      <div class="tab core active" data-group="primary" data-tab="core">
        <!-- Archetyp -->
        <div class="archetype-section">
          <h3 class="centered">{{localize "COGSYNDICATE.Archetype"}}</h3>
          <div class="archetype-drop flexrow" data-type="archetype">
            {{#if system.archetype.name}}
              <span class="archetype-name">{{system.archetype.name}}</span>
              <button type="button" class="remove-archetype" title="{{localize 'COGSYNDICATE.RemoveArchetype'}}"><i class="fas fa-trash"></i></button>
            {{else}}
              <span>{{localize "COGSYNDICATE.ArchetypeDrop"}}</span>
            {{/if}}
          </div>
        </div>

        <!-- Atrybuty Główne -->
        <div class="main-attributes columns">
          <h3 class="centered">{{localize "COGSYNDICATE.MainAttributes"}}</h3>
          <div class="attributes-container">
            <div class="attribute">
              <label>{{localize "COGSYNDICATE.Machine"}}</label>
              <div class="attribute-content">
                <input type="number" class="base-value" name="system.attributes.machine.base" value="{{system.attributes.machine.base}}" min="1" max="6" step="1" {{#unless editable}}disabled{{/unless}} title="{{localize 'COGSYNDICATE.BaseValueTooltip'}}" />
                <input type="number" class="effective-value" name="system.attributes.machine.value" value="{{effectiveAttributes.machine}}" min="1" max="6" readonly title="{{localize 'COGSYNDICATE.EffectiveValueTooltip'}}" />
                <button type="button" class="roll-attribute roll-btn" data-attribute="machine" title="{{localize 'COGSYNDICATE.Roll2d12'}}"><i class="fas fa-dice-d12"></i></button>
              </div>
            </div>
            <div class="attribute">
              <label>{{localize "COGSYNDICATE.Engineering"}}</label>
              <div class="attribute-content">
                <input type="number" class="base-value" name="system.attributes.engineering.base" value="{{system.attributes.engineering.base}}" min="1" max="6" step="1" {{#unless editable}}disabled{{/unless}} title="{{localize 'COGSYNDICATE.BaseValueTooltip'}}" />
                <input type="number" class="effective-value" name="system.attributes.engineering.value" value="{{effectiveAttributes.engineering}}" min="1" max="6" readonly title="{{localize 'COGSYNDICATE.EffectiveValueTooltip'}}" />
                <button type="button" class="roll-attribute roll-btn" data-attribute="engineering" title="{{localize 'COGSYNDICATE.Roll2d12'}}"><i class="fas fa-dice-d12"></i></button>
              </div>
            </div>
            <div class="attribute">
              <label>{{localize "COGSYNDICATE.Intrigue"}}</label>
              <div class="attribute-content">
                <input type="number" class="base-value" name="system.attributes.intrigue.base" value="{{system.attributes.intrigue.base}}" min="1" max="6" step="1" {{#unless editable}}disabled{{/unless}} title="{{localize 'COGSYNDICATE.BaseValueTooltip'}}" />
                <input type="number" class="effective-value" name="system.attributes.intrigue.value" value="{{effectiveAttributes.intrigue}}" min="1" max="6" readonly title="{{localize 'COGSYNDICATE.EffectiveValueTooltip'}}" />
                <button type="button" class="roll-attribute roll-btn" data-attribute="intrigue" title="{{localize 'COGSYNDICATE.Roll2d12'}}"><i class="fas fa-dice-d12"></i></button>
              </div>
            </div>
          </div>
        </div>

        <!-- Atrybuty Pochodne -->
        <div class="secondary-attributes columns">
          <h3 class="centered">{{localize "COGSYNDICATE.SecondaryAttributes"}}</h3>
          <div class="attributes-container">
            <div class="attribute">
             <label>{{localize "COGSYNDICATE.Endurance"}}</label>
              <div class="radio-group horizontal">
                <div class="radio-item">
                  <input type="radio" id="endurance-0" name="system.secondaryAttributes.endurance.value" value="0" {{#if (eq system.secondaryAttributes.endurance.value "0")}}checked{{/if}}>
                  <label for="endurance-0">0</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="endurance-1" name="system.secondaryAttributes.endurance.value" value="-1" {{#if (eq system.secondaryAttributes.endurance.value "-1")}}checked{{/if}}>
                  <label for="endurance-1">-1</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="endurance-2" name="system.secondaryAttributes.endurance.value" value="-2" {{#if (eq system.secondaryAttributes.endurance.value "-2")}}checked{{/if}}>
                 <label for="endurance-2">-2</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="endurance-3" name="system.secondaryAttributes.endurance.value" value="-3" {{#if (eq system.secondaryAttributes.endurance.value "-3")}}checked{{/if}}>
                  <label for="endurance-3">-3</label>
                </div>
              </div>
            </div>
            <div class="attribute">
              <label>{{localize "COGSYNDICATE.Control"}}</label>
              <div class="radio-group horizontal">
                <div class="radio-item">
                  <input type="radio" id="control-0" name="system.secondaryAttributes.control.value" value="0" {{#if (eq system.secondaryAttributes.control.value "0")}}checked{{/if}}>
                  <label for="control-0">0</label>
                </div>
                <div class="radio-item">
                 <input type="radio" id="control-1" name="system.secondaryAttributes.control.value" value="-1" {{#if (eq system.secondaryAttributes.control.value "-1")}}checked{{/if}}>
                  <label for="control-1">-1</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="control-2" name="system.secondaryAttributes.control.value" value="-2" {{#if (eq system.secondaryAttributes.control.value "-2")}}checked{{/if}}>
                  <label for="control-2">-2</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="control-3" name="system.secondaryAttributes.control.value" value="-3" {{#if (eq system.secondaryAttributes.control.value "-3")}}checked{{/if}}>
                  <label for="control-3">-3</label>
                </div>
              </div>
            </div>
            <div class="attribute">
              <label>{{localize "COGSYNDICATE.Determination"}}</label>
              <div class="radio-group horizontal">
                <div class="radio-item">
                  <input type="radio" id="determination-0" name="system.secondaryAttributes.determination.value" value="0" {{#if (eq system.secondaryAttributes.determination.value "0")}}checked{{/if}}>
                  <label for="determination-0">0</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="determination-1" name="system.secondaryAttributes.determination.value" value="-1" {{#if (eq system.secondaryAttributes.determination.value "-1")}}checked{{/if}}>
                  <label for="determination-1">-1</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="determination-2" name="system.secondaryAttributes.determination.value" value="-2" {{#if (eq system.secondaryAttributes.determination.value "-2")}}checked{{/if}}>
                  <label for="determination-2">-2</label>
                </div>
                <div class="radio-item">
                  <input type="radio" id="determination-3" name="system.secondaryAttributes.determination.value" value="-3" {{#if (eq system.secondaryAttributes.determination.value "-3")}}checked{{/if}}>
                  <label for="determination-3">-3</label>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Zasoby Agenta -->
        <div class="agent-resources columns">
          <h3 class="centered">{{localize "COGSYNDICATE.AgentResources"}}</h3>
          <div class="resources-container">
            <div class="resource gear">
              <label>{{localize "COGSYNDICATE.Gear"}}</label>
              <div class="resource-content">
                <button type="button" class="decrement small-btn" data-resource="gear">-</button>
                <input type="number" class="gear-value" name="system.resources.gear.value" value="{{system.resources.gear.value}}" min="0" max="{{system.resources.gear.max}}" data-dtype="Number" title="{{localize 'COGSYNDICATE.GearTooltip' max=system.resources.gear.max}}" />
                <span>/ {{system.resources.gear.max}}</span>
                <button type="button" class="increment small-btn" data-resource="gear">+</button>
              </div>
              <div class="gear-basis">
                <label>{{localize "COGSYNDICATE.GearBasis"}}</label>
                <select name="system.resources.gear.basis" class="gear-basis-select">
                  <option value="machine" {{#if (eq system.resources.gear.basis "machine")}}selected{{/if}}>{{localize "COGSYNDICATE.Machine"}}</option>
                  <option value="engineering" {{#if (eq system.resources.gear.basis "engineering")}}selected{{/if}}>{{localize "COGSYNDICATE.Engineering"}}</option>
                </select>
              </div>
              <div class="gear-spend-section">
                <button type="button" class="spend-gear-btn">{{localize "COGSYNDICATE.SpendGear"}}</button>
              </div>
            </div>
            <div class="resource trauma">
              <label>{{localize "COGSYNDICATE.Trauma"}}</label>
              <div class="resource-content">
                <button type="button" class="decrement small-btn" data-resource="trauma">-</button>
                <input type="number" class="trauma-value" name="system.resources.trauma.value" value="{{system.resources.trauma.value}}" min="0" max="{{system.resources.trauma.max}}" data-dtype="Number" title="{{localize 'COGSYNDICATE.TraumaTooltip' max=system.resources.trauma.max}}" />
                <span>/ {{system.resources.trauma.max}}</span>
                <button type="button" class="increment small-btn" data-resource="trauma">+</button>
              </div>
            </div>
            <div class="resource stress">
             <label>{{localize "COGSYNDICATE.Stress"}}</label>
              <div class="resource-content">
                <button type="button" class="decrement small-btn" data-resource="stress">-</button>
                <input type="number" class="stress-value" name="system.resources.stress.value" value="{{system.resources.stress.value}}" min="0" max="{{system.resources.stress.max}}" data-dtype="Number" title="{{localize 'COGSYNDICATE.StressTooltip' max=system.resources.stress.max}}" />
                <span>/ {{system.resources.stress.max}}</span>
                <button type="button" class="increment small-btn" data-resource="stress">+</button>
              </div>
              <div class="stress-spend-section">
                <button type="button" class="spend-stress-btn">{{localize "COGSYNDICATE.SpendStress"}}</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Rozwój -->
        <div class="development-section">
          <h3 class="centered">{{localize "COGSYNDICATE.Development"}}</h3>
          <div class="resources-container">
            <div class="resource development">
              <label>{{localize "COGSYNDICATE.DevelopmentPoints"}}</label>
              <div class="resource-content">
                <button type="button" class="decrement small-btn" data-resource="development">-</button>
                <input type="number" class="development-value" name="system.resources.development.value" value="{{system.resources.development.value}}" min="0" max="12" data-dtype="Number" title="{{localize 'COGSYNDICATE.DevelopmentPointsTooltip' max=system.resources.development.max}}" />
                <span>/ {{system.resources.development.max}}</span>
                <button type="button" class="increment small-btn" data-resource="development">+</button>
              </div>
            </div>
         </div>
        </div>
      </div>

      <!-- Zakładka Atuty -->
      <div class="tab feats" data-group="primary" data-tab="feats">
        <h3 class="centered">{{localize "COGSYNDICATE.FeatsTab"}}</h3>
        <div class="feats-drop" style="border: 2px dashed #ccc; padding: 20px; text-align: center; margin-bottom: 20px;">
          {{localize "COGSYNDICATE.FeatsDrop"}}
        </div>
        {{#if feats}}
          <ol class="feats-list">
            {{#each feats}}
              <li class="feat-item" data-item-id="{{this.id}}">
                <div class="feat-header">
                  <img class="feat-image" src="{{this.img}}" title="{{this.name}}" width="36" height="36" />
                  <h4 class="feat-name">{{this.name}}</h4>
                  <div class="feat-controls">
                    <a class="feat-control delete-feat" title="{{localize 'COGSYNDICATE.RemoveFeat'}}"><i class="fas fa-trash"></i></a>
                  </div>
                </div>
                <div class="feat-description">{{this.system.description}}</div>
                {{#if this.system.effect}}
                  <div class="feat-effect"><strong>{{localize "COGSYNDICATE.Effect"}}:</strong> {{this.system.effect}}</div>
                {{/if}}
              </li>
            {{/each}}
          </ol>
        {{else}}
          <p class="no-feats">{{localize "COGSYNDICATE.NoFeats"}}</p>
        {{/if}}
      </div>

      <!-- Zakładka Ekwipunek -->
      <div class="tab equipment" data-group="primary" data-tab="equipment">
        <h3 class="centered">{{localize "COGSYNDICATE.EquipmentTab"}}</h3>
        
        <!-- Punkty Ekwipunku -->
        <div class="equipment-points-section">
          <h4 class="centered">{{localize "COGSYNDICATE.EquipmentPoints"}}</h4>
          <div class="equipment-points-display">
            <span class="equipment-points-value">{{system.equipmentPoints.value}}</span>
            <span class="equipment-points-max">/ {{system.equipmentPoints.max}}</span>
          </div>
        </div>

        <!-- Przycisk dodawania ekwipunku -->
        <div class="equipment-controls">
          <button type="button" class="add-equipment-btn">{{localize "COGSYNDICATE.AddEquipment"}}</button>
        </div>

        <!-- Lista ekwipunku -->
        {{#if system.equipments}}
          <ol class="equipment-list">
            {{#each system.equipments}}
              <li class="equipment-item" data-index="{{@index}}">
                <div class="equipment-header">
                  <h4 class="equipment-name">{{this.name}}</h4>
                  <div class="equipment-controls">
                    <a class="equipment-control edit-equipment" title="{{localize 'COGSYNDICATE.EditEquipment'}}"><i class="fas fa-edit"></i></a>
                    <a class="equipment-control delete-equipment" title="{{localize 'COGSYNDICATE.DeleteEquipment'}}"><i class="fas fa-trash"></i></a>
                  </div>
                </div>
                <div class="equipment-details">
                  <span class="equipment-type">{{localize (concat "COGSYNDICATE.EquipmentType" (capitalize this.type))}}</span>
                  <span class="equipment-cost">{{localize "COGSYNDICATE.Cost"}}: {{this.cost}}</span>
                  <span class="equipment-usage">{{localize "COGSYNDICATE.Usage"}}: {{this.usage}}</span>
                  {{#if this.action}}
                    <span class="equipment-action">{{localize "COGSYNDICATE.Action"}}: {{this.action}}</span>
                  {{/if}}
                </div>
                <div class="equipment-status">
                  <label class="status-checkbox">
                    <input type="checkbox" class="equipment-status-checkbox" data-index="{{@index}}" data-status="used" {{#if this.used}}checked{{/if}} />
                    {{localize "COGSYNDICATE.Used"}}
                  </label>
                  <label class="status-checkbox">
                    <input type="checkbox" class="equipment-status-checkbox" data-index="{{@index}}" data-status="droppedDamaged" {{#if this.droppedDamaged}}checked{{/if}} />
                    {{localize "COGSYNDICATE.DroppedDamaged"}}
                  </label>
                  <label class="status-checkbox">
                    <input type="checkbox" class="equipment-status-checkbox" data-index="{{@index}}" data-status="destroyed" {{#if this.destroyed}}checked{{/if}} />
                    {{localize "COGSYNDICATE.Destroyed"}}
                  </label>
                </div>
              </li>
            {{/each}}
          </ol>
        {{else}}
          <p class="no-equipment">{{localize "COGSYNDICATE.NoEquipment"}}</p>
        {{/if}}
      </div>

      <!-- Zakładka Traumy -->
      <div class="tab traumas" data-group="primary" data-tab="traumas">
        <h3 class="centered">{{localize "COGSYNDICATE.TraumasTab"}}</h3>
        
        <!-- Przycisk dodawania traumy -->
        <div class="trauma-controls">
          <button type="button" class="add-trauma-btn">{{localize "COGSYNDICATE.AddTrauma"}}</button>
        </div>

        <!-- Lista traum -->
        {{#if system.traumas}}
          <ol class="trauma-list">
            {{#each system.traumas}}
              <li class="trauma-item" data-index="{{@index}}">
                <div class="trauma-header">
                  <h4 class="trauma-name">{{this.name}}</h4>
                  <span class="trauma-type {{this.type}}">{{localize (concat "COGSYNDICATE.TraumaType" (capitalize this.type))}}</span>
                  <div class="trauma-controls">
                    <a class="trauma-control edit-trauma" title="{{localize 'COGSYNDICATE.EditTrauma'}}"><i class="fas fa-edit"></i></a>
                    <a class="trauma-control delete-trauma" title="{{localize 'COGSYNDICATE.DeleteTrauma'}}"><i class="fas fa-trash"></i></a>
                  </div>
                </div>
                {{#if this.description}}
                  <div class="trauma-description">{{this.description}}</div>
                {{/if}}
                {{#if this.effect}}
                  <div class="trauma-effect"><strong>{{localize "COGSYNDICATE.Effect"}}:</strong> {{this.effect}}</div>
                {{/if}}
              </li>
            {{/each}}
          </ol>
        {{else}}
          <p class="no-traumas">{{localize "COGSYNDICATE.NoTraumas"}}</p>
        {{/if}}
      </div>

      <!-- Zakładka Notatki -->
      <div class="tab notes" data-group="primary" data-tab="notes">
        <h3 class="centered">{{localize "COGSYNDICATE.NotesTab"}}</h3>
        <div class="notes-section">
          <textarea name="system.notes" placeholder="{{localize 'COGSYNDICATE.NotesPlaceholder'}}" rows="15">{{system.notes}}</textarea>
        </div>
      </div>
    </section>
  </section>
</form>
